(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[17],{"2ba7":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-page",{attrs:{padding:""}},[0==t.isLoading?a("div",[a("div",{staticClass:"row"},[a("q-input",{staticClass:"col",attrs:{readonly:t.disabledField,label:"Title"},model:{value:t.editJob.title,callback:function(e){t.$set(t.editJob,"title",e)},expression:"editJob.title"}})],1),a("div",{staticClass:"row"},[a("q-input",{staticClass:"col",attrs:{readonly:t.disabledField,label:"Description"},model:{value:t.editJob.description,callback:function(e){t.$set(t.editJob,"description",e)},expression:"editJob.description"}})],1),a("div",{staticClass:"row justify-between q-pa-sm"},[a("q-toggle",{staticClass:"col",attrs:{disable:t.disabledField,label:"Baby"},model:{value:t.editJob.baby,callback:function(e){t.$set(t.editJob,"baby",e)},expression:"editJob.baby"}}),a("q-toggle",{staticClass:"col",attrs:{disable:t.disabledField,label:"Home"},model:{value:t.editJob.home,callback:function(e){t.$set(t.editJob,"home",e)},expression:"editJob.home"}}),a("q-toggle",{staticClass:"col",attrs:{disable:t.disabledField,label:"Pet"},model:{value:t.editJob.pet,callback:function(e){t.$set(t.editJob,"pet",e)},expression:"editJob.pet"}})],1),a("div",{staticClass:"row"},[a("q-input",{staticClass:"col",attrs:{readonly:t.disabledField,"stack-label":"",label:"Start Date"},scopedSlots:t._u([t.disabledField?null:{key:"before",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"eva-calendar-outline"}},[a("q-popup-proxy",[a("q-date",{model:{value:t.sDate,callback:function(e){t.sDate=e},expression:"sDate"}})],1)],1)]},proxy:!0}],null,!0),model:{value:t.sDateDisplay,callback:function(e){t.sDateDisplay=e},expression:"sDateDisplay"}})],1),a("div",{staticClass:"row"},[a("q-input",{staticClass:"col",attrs:{readonly:t.disabledField,label:"Start Time"},scopedSlots:t._u([t.disabledField?null:{key:"before",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"eva-clock-outline"}},[a("q-popup-proxy",[a("q-time",{model:{value:t.editJob.startTime,callback:function(e){t.$set(t.editJob,"startTime",e)},expression:"editJob.startTime"}})],1)],1)]},proxy:!0}],null,!0),model:{value:t.sTime,callback:function(e){t.sTime=e},expression:"sTime"}})],1),a("div",{staticClass:"row q-pt-md text-center"},[a("p",{staticClass:"bg-warning full-width text-white text-subtitle2"},[t._v(" APPLIED ")])]),a("div",{staticClass:"row"},[t._l(t.editJob.applied,(function(e){return[a("p-who-applied",{key:e.id,attrs:{who:e,job:t.editJob},on:{awardJob:function(a){return t.awardJob(e)}}})]}))],2),a("div",{staticClass:"row q-pt-md text-center"},[a("q-separator")],1),a("div",{staticClass:"row"},[a("q-checkbox",{attrs:{label:"Active"},model:{value:t.editJob.active,callback:function(e){t.$set(t.editJob,"active",e)},expression:"editJob.active"}})],1),a("div",{staticClass:"q-pa-sm"},[a("q-btn",{staticClass:"full-width",attrs:{disable:t.disabledField,color:"primary",label:"save"},on:{click:t.saveJob}})],1)]):t._e()])},s=[],o=(a("c5f6"),a("a34a")),n=a.n(o),r=(a("96cf"),a("c973")),l=a.n(r),c=a("bd4c"),d=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row"},[a("q-chip",{attrs:{clickable:!t.job.awarded,"icon-right":t.sitter.id===t.job.awarded?"eva-award-outline":null},on:{click:function(e){!t.job.awarded&&t.awardJob(t.sitter.id)}}},[a("q-avatar",[a("img",{attrs:{src:t.sitter.photoURL}})]),t._v("\n    "+t._s(t.sitter.name)+"\n  ")],1)],1)},b=[],u=a("fc1b"),p={name:"ParentWhoApplied",props:{who:{type:String},job:{type:Object}},data:function(){return{sitter:{},currentSitterKey:this.$store.getters.getKey}},created:function(){var t=this;return l()(n.a.mark((function e(){var a;return n.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,u["a"].collection("Users").doc(t.who).get();case 2:a=e.sent,t.sitter=a.data(),t.sitter.id=a.id;case 5:case"end":return e.stop()}}),e)})))()},methods:{awardJob:function(t){this.$emit("awardJob",t)}}},m=p,v=a("2877"),f=Object(v["a"])(m,d,b,!1,null,null,null),h=f.exports;a("2591");function w(t,e){return u["a"].collection("Jobs").doc(t).set(e)}var J={name:"EditJob",props:["id"],components:{"p-who-applied":h},data:function(){return{disabledField:!1,sDateDisplay:null,sDate:null,sTime:null,editJob:null,isLoading:!0}},created:function(){var t=this;return l()(n.a.mark((function e(){var a;return n.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u["a"].collection("Jobs").doc(t.id).get();case 3:a=e.sent,t.editJob=a.data(),t.editJob.id=a.id,t.sDateDisplay=c["b"].formatDate(t.editJob.startDate.toDate(),"MM-DD-YYYY"),t.sDate=c["b"].formatDate(t.editJob.startDate.toDate(),"YYYY/MM/DD"),t.sTime=t.convertTime(),t.editJob.applied.length>0&&(t.disabledField=!0),t.$store.commit("setCurrentLocation","Edit Job"),t.isLoading=!1,e.next=17;break;case 14:e.prev=14,e.t0=e["catch"](0),console.log("error: ",e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})))()},watch:{sDate:function(){this.sDateDisplay=c["b"].formatDate(this.sDate,"MM-DD-YYYY")},"editJob.startTime":function(){this.convertTime()}},methods:{convertTime:function(){var t=this.editJob.startTime.substring(0,2);if(t>12){var e=t-12;return this.sTime="0"+e+this.editJob.startTime.substring(2)+" pm",this.sTime}return this.sTime=this.editJob.startTime+" am",this.sTime},saveJob:function(){var t=this;return l()(n.a.mark((function e(){var a;return n.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=c["b"].buildDate({year:Number(t.sDate.substr(0,4)),month:Number(t.sDate.substr(5,2)),date:Number(t.sDate.substr(8,2))}),t.editJob.startDate=a,e.prev=2,e.next=5,w(t.id,t.editJob);case 5:t.$q.notify({message:"Your Job Was Updated",icon:"eva-checkmark-circle-2-outline",position:"top-right",color:"positive",timeout:1e3}),e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](2),console.log("err: ",e.t0);case 11:case"end":return e.stop()}}),e,null,[[2,8]])})))()},awardJob:function(t){var e=this;this.$q.dialog({title:"Award a Job?",message:"Would you like to Award this Job. This can NOT be undone?",cancel:!0}).onOk(l()(n.a.mark((function a(){return n.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return console.log("who: ",t),a.next=3,u["a"].collection("Jobs").doc(e.id).update({awarded:t});case 3:e.$set(e.editJob,"awarded",t);case 4:case"end":return a.stop()}}),a)})))).onCancel((function(){console.log("pressed cancelled")}))}}},D=J,g=Object(v["a"])(D,i,s,!1,null,null,null);e["default"]=g.exports}}]);